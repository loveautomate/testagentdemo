# TestAgentDemo â€“ Agentic QA Workflow Demo (Cursor + Playwright)

[![Playwright Tests](https://github.com/loveautomate/testagentdemo/actions/workflows/playwright.yml/badge.svg?branch=main)](https://github.com/loveautomate/testagentdemo/actions/workflows/playwright.yml)

This repository demonstrates **Agentic QA Workflow** using:

- Playwright Test  
- Playwright AI Agents (Planner, Generator, Healer)  
- Cursor AI Orchestration  

The workflow performs:

> PLAN â†’ DEVELOP â†’ TEST â†’ HEAL â†’ REPORT

for two demo targets:

- UI E2E: https://www.saucedemo.com/
- API: https://petstore.swagger.io/

---

## Playwright Agent Files (Original, DO NOT MODIFY)

Generated by:

npx playwright init-agents --loop=vscode


Files:

- `.github/chatmodes/planner.chatmode.md`
- `.github/chatmodes/generator.chatmode.md`
- `.github/chatmodes/healer.chatmode.md`
- `.vscode/mcp.json` *(adjusted for Cursor)*

Cursor orchestrator rule uses these as authoritative definitions.

---

## How to Use in Cursor

Inside Cursor, run commands such as:

- **"Run the TestAgentDemo loop for saucedemo"**  
- **"Plan â†’ Generate â†’ Test â†’ Heal â†’ Report petstore API"**  

The TestAgentDemo orchestrator will then:

1. PLAN â†’ Create test plan in `tests/plans/*.md`
2. DEVELOP â†’ Generate Playwright tests into `tests/e2e/` or `tests/api/`
3. TEST â†’ Ask to run `npx playwright test`
4. HEAL â†’ Suggest minimal fixes based on failures
5. REPORT â†’ Produce a Markdown test report in `reports/*.md`

---

## Running Tests Manually

```bash
npm install
npx playwright test
```

---

## Configuring MCP in Cursor IDE

Cursor supports MCP (Model Context Protocol) servers at two levels:

### Project-Level Configuration

Place `.vscode/mcp.json` in your project (already included in this repo):

```json
{
  "mcpServers": {
    "playwright-test": {
      "command": "npx",
      "args": ["@playwright/mcp@latest"]
    }
  }
}
```

> **Important:** The server name must be `playwright-test` to match the tool prefixes in chatmode files (e.g., `playwright-test/browser_click`).

### User-Level (Global) Configuration

For MCP servers available across all projects, edit your global Cursor config:

| OS | Path |
|----|------|
| **Windows** | `C:\Users\<username>\.cursor\mcp.json` |
| **macOS** | `~/.cursor/mcp.json` |
| **Linux** | `~/.cursor/mcp.json` |

Example global `mcp.json`:

```json
{
  "mcpServers": {
    "playwright-test": {
      "command": "npx",
      "args": ["@playwright/mcp@latest"]
    },
    "my-remote-server": {
      "url": "https://example.com/mcp",
      "headers": {}
    }
  }
}
```

### MCP Server Types

| Type | Config | Example |
|------|--------|---------|
| **stdio** (local) | `command` + `args` | `playwright-test` |
| **HTTP/SSE** (remote) | `url` + optional `headers` | Remote MCP servers |

### Verifying MCP Status in Cursor

1. Open **Settings** (Ctrl+,)
2. Navigate to **MCP** section
3. Check server status indicators:
   - ðŸŸ¢ Green = Connected
   - ðŸ”´ Red = Error (check Output â†’ MCP logs)

### Troubleshooting

```powershell
# Clear npx cache if MCP server fails to start
Remove-Item -Recurse -Force "$env:LOCALAPPDATA\npm-cache\_npx"

# Restart Cursor to reload MCP configuration
```

